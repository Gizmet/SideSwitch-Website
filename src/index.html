<!DOCTYPE html>
<html>
<head>
    <title>SideSwitch</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <div id="navigation" class="nav">
            <!-- Brand -->
            <div class="brand">
                <div class="brand-tile" aria-hidden="true"><span class="brand-glyph">s</span></div>
                <div class="brand-text">SideSwitch</div>
            </div>

            <!-- Sites list -->
            <div id="site-list" class="nav-group"></div>

            <!-- Bottom actions -->
            <div class="nav-bottom">
                <button id="add-site-btn" class="btn secondary">
                    <span class="plus" aria-hidden="true">＋</span> Add Site
                </button>

                <button id="toggle-blur" class="btn primary"
                    aria-pressed="false" aria-label="Toggle Blur (B)"
                    title="Toggle Blur (B)">
                    Blur
                </button>
            </div>
        </div>

        <div id="content">
            <div id="webview-container">
                <webview id="site-view" 
                    src="data:text/html,<html><body style='background:black'></body></html>"
                    allowpopups
                    webpreferences="allowRunningInsecureContent=true, webSecurity=false, experimentalFeatures=true, nativeWindowOpen=true, javascript=true, plugins=true, webgl=true, backgroundThrottling=false"
                    useragent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
                    partition="persist:streamer"
                    httpreferrer="https://www.google.com"
                    disablewebsecurity
                    allowtransparency
                    plugins
                    autosize
                    nodeintegration
                    nodeintegrationinsubframes
                    allowpopups
                    enableremotemodule
                    blinkfeatures="WebRTC,AudioVideoTracks,GetUserMedia,MediaStreamTrack,WebGL,WebGL2"
                    style="width: 100%; height: 100%; background: black;"
                    ></webview>
                <div id="loading-indicator" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 18px;">Loading...</div>
                <div id="dim-overlay" class="dim-overlay">
                    <div class="resize-handle"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <h2>Settings</h2>
            <div class="settings-group">
                <label>
                    <input type="checkbox" id="dark-mode">
                    Dark Mode
                </label>
                <label>
                    <input type="checkbox" id="auto-connect">
                    Auto Connect
                </label>
                <label>
                    <input type="checkbox" id="save-logs">
                    Save Chat Logs
                </label>
            </div>
            <div class="settings-group">
                <label>
                    Privacy Mode
                    <select id="privacy-mode">
                        <option value="normal">Normal</option>
                        <option value="strict">Strict</option>
                        <option value="custom">Custom</option>
                    </select>
                </label>
            </div>
            <div class="button-group">
                <button onclick="saveSettings()">Save</button>
                <button onclick="closeSettings()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Add Site Modal -->
    <div id="add-site-modal" class="modal">
        <div class="modal-content add-site-modal">
            <div class="modal-header">
                <h2>Add New Site</h2>
                <button class="close-btn" id="close-add-site">×</button>
            </div>
            
            <div class="modal-tabs">
                <button class="tab-btn active" data-tab="quick">Quick Add</button>
                <button class="tab-btn" data-tab="custom">Custom Site</button>
            </div>

            <!-- Quick Add Tab -->
            <div class="tab-content active" id="quick-tab">
                <div class="categories-container">
                    <div class="categories-grid" id="categories-grid">
                        <!-- Categories will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Custom Site Tab -->
            <div class="tab-content" id="custom-tab">
                <form id="add-site-form" class="add-site-form">
                    <div class="form-group">
                        <label for="site-name">Site Name</label>
                        <input type="text" id="site-name" placeholder="e.g. My Custom Site" required>
                    </div>
                    <div class="form-group">
                        <label for="site-url">Site URL</label>
                        <input type="url" id="site-url" placeholder="https://example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="site-group">Category (Optional)</label>
                        <select id="site-group">
                            <option value="">Select a category</option>
                            <option value="News & Media">News & Media</option>
                            <option value="Social Media">Social Media</option>
                            <option value="Video & Streaming">Video & Streaming</option>
                            <option value="Communication">Communication</option>
                            <option value="Productivity">Productivity</option>
                            <option value="Entertainment">Entertainment</option>
                            <option value="Gaming">Gaming</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="site-audio">
                            <span class="checkmark"></span>
                            Enable audio by default
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="site-pinned">
                            <span class="checkmark"></span>
                            Pin to top
                        </label>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" id="cancel-add-site" class="btn secondary">Cancel</button>
                <button type="button" id="save-site" class="btn primary">Add Site</button>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html> 