<!DOCTYPE html>
<html>
<head>
    <title>SideSwitch</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <div id="navigation" class="nav">
            <!-- Brand -->
            <div class="brand">
                <div class="brand-tile" aria-hidden="true"><span class="brand-glyph">s</span></div>
                <div class="brand-text">SideSwitch</div>
            </div>

            <!-- Sites list -->
            <div id="site-list" class="nav-group"></div>

            <!-- Bottom actions -->
            <div class="nav-bottom">
                <button id="settings-btn" class="btn secondary settings-btn">
                    <span class="settings-icon" aria-hidden="true">⚙</span> Settings
                </button>
                <button id="add-site-btn" class="btn secondary">
                    <span class="plus" aria-hidden="true">＋</span> Add Site
                </button>

                <button id="toggle-blur" class="btn primary"
                    aria-pressed="false" aria-label="Toggle Blur (B)"
                    title="Toggle Blur (B)">
                    Blur
                </button>
            </div>
        </div>

        <div id="content">
            <div id="webview-container">
                <webview id="site-view" 
                    src="data:text/html,<html><body style='background:black'></body></html>"
                    allowpopups
                    webpreferences="allowRunningInsecureContent=true, webSecurity=false, experimentalFeatures=true, nativeWindowOpen=true, javascript=true, plugins=true, webgl=true, backgroundThrottling=false"
                    useragent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
                    partition="persist:streamer"
                    httpreferrer="https://www.google.com"
                    disablewebsecurity
                    allowtransparency
                    plugins
                    autosize
                    nodeintegration
                    nodeintegrationinsubframes
                    allowpopups
                    enableremotemodule
                    blinkfeatures="WebRTC,AudioVideoTracks,GetUserMedia,MediaStreamTrack,WebGL,WebGL2"
                    style="width: 100%; height: 100%; background: black;"
                    ></webview>
                <div id="loading-indicator" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 18px;">Loading...</div>
                <div id="dim-overlay" class="dim-overlay">
                    <div class="resize-handle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="ss-modal" aria-hidden="true" role="dialog" aria-labelledby="settingsTitle">
        <div class="ss-modal__backdrop" data-close></div>

        <div class="ss-modal__card" role="document">
            <div class="ss-modal__head">
                <h2 id="settingsTitle">Settings</h2>
                <button class="ss-x" data-close aria-label="Close">✕</button>
            </div>

            <div class="ss-modal__body">
                <div class="settings-section">
                    <h3>Blur Settings</h3>
                    <div class="setting-group">
                        <label for="blur-intensity">Blur Intensity:</label>
                        <select id="blur-intensity">
                            <option value="5">Light (5px)</option>
                            <option value="10">Medium (10px)</option>
                            <option value="15" selected>Strong (15px)</option>
                            <option value="20">Maximum (20px)</option>
                        </select>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Camera Settings</h3>
                    <div class="setting-group">
                        <label for="camera-select">Camera:</label>
                        <select id="camera-select">
                            <option value="default">Default Camera</option>
                        </select>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Appearance</h3>
                    <div class="setting-group">
                        <label class="ss-check">
                            <input type="checkbox" id="dark-mode">
                            <span class="checkmark"></span>
                            Dark Mode (Always On)
                        </label>
                    </div>
                </div>

                <div class="ss-actions">
                    <button type="button" class="btn secondary" data-close>Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Site Modal -->
    <div id="add-site-modal" class="ss-modal" aria-hidden="true" role="dialog" aria-labelledby="addSiteTitle">
        <div class="ss-modal__backdrop" data-close></div>

        <div class="ss-modal__card" role="document">
            <div class="ss-modal__head">
                <h2 id="addSiteTitle">Add Site</h2>
                <button class="ss-x" data-close aria-label="Close">✕</button>
            </div>

            <div class="ss-modal__body">
                <!-- Category pills -->
                <div class="ss-pills" id="cat-pills" role="tablist" aria-label="Categories">
                    <!-- populated by JS -->
                </div>

                <!-- Template grid -->
                <div class="ss-grid" id="template-grid" aria-live="polite"></div>

                <!-- Divider -->
                <div class="ss-divider"><span>or add a custom link</span></div>

                <!-- Custom form -->
                <form id="custom-site-form" class="ss-form">
                    <div class="ss-row">
                        <label>Title
                            <input id="cs-title" type="text" placeholder="e.g. YouTube" required maxlength="40">
                        </label>
                    </div>
                    <div class="ss-row">
                        <label>URL
                            <input id="cs-url" type="url" inputmode="url" placeholder="https://example.com" required>
                        </label>
                    </div>
                    <div class="ss-row ss-row--split">
                        <label class="ss-check"><input id="cs-audio" type="checkbox"> Allow site audio</label>
                        <label>Zoom
                            <input id="cs-zoom" type="number" step="0.05" min="0.8" max="1.4" value="1">
                        </label>
                    </div>
                    <div class="ss-actions">
                        <button type="button" class="btn secondary" data-close>Cancel</button>
                        <button type="submit" class="btn primary">Add Site</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html> 